Рассмотрим основные приемы монтирования дисков в linux. Самый простой и часто используемый вариант это присоединение устройства без опций.

Опции

Давайте рассмотрим основные опции команды mount в Linux:

    -a или --all: монтировать все файловые системы, указанные в файле /etc/fstab.
    -c или --no-canonicalize: не канонизировать пути (не разворачивать символические ссылки).
    -f или --fake: пробный запуск; пропустить системный вызов mount(2) (тестирование).
    -F или --fork: создать отдельный процесс для каждого устройства (использовать с -a).
    -T или --fstab <path>: альтернативный файл к /etc/fstab.
    -i или --internal-only: не вызывать вспомогательные программы для типов монтирования (mount.<type>).
    -l или --show-labels: отобразить также метки файловых систем.
    -m или --mkdir[=<mode>]: псевдоним для ‘-o X-mount.mkdir[=<mode>]’; создать каталог для монтирования.
    -n или --no-mtab: не записывать в файл /etc/mtab.
    -o или --options <list>: указать опции монтирования, разделенные запятыми.
    -O или --test-opts <list>: ограничить набор файловых систем для тестирования (использовать с -a).
    -r или --read-only: монтировать файловую систему только для чтения (аналогично -o ro).
    -t или --types <list>: ограничить набор типов файловых систем.
    -v или --verbose: выводить подробную информацию о выполняемых действиях.
    -w или --rw или --read-write: монтировать файловую систему для чтения и записи (по умолчанию).
    -N или --namespace <ns>: выполнить монтирование в другом пространстве имен.

Дополнительные опции:

    -V или --version: отобразить версию.
    -h или --help: отобразить короткую справку.

Чтобы прочитать подробную справку используйте команду:

$ man mount

Пример:
$ mount /dev/sda1 /mnt/data

Эта команда монтирует раздел /dev/sda1 в каталог /mnt/data.

Рассмотрим подробнее. Для того, чтобы определить название диска который необходимо подключить удобно использовать утилиту fdisk. Открываем терминал и указываем команду:
$ sudo fdisk -l

Отобразится полная информация о дисках.

Вы можете выбрать любой каталог в качестве точки монтирования. Команда:
$ sudo mount /dev/vdb /mnt/save

Для проверки можно использовать команду df. Пример:
$ df /mnt/save

Как перемонтировать диск

Для перемонтирования диска в Linux используйте команду mount с опцией -o (options) и параметром remount. Вот пример синтаксиса:
sudo mount -o remount /путь/к/точке_монтирования

Здесь /путь/к/точке_монтирования — это путь к точке монтирования, которую вы хотите перемонтировать.

Пример:
$ sudo mount -o remount /mnt/save/

Для того, чтобы при работе команды было отображено какие действия были выполнены используем параметр -v или --verbose. Для наглядности на скришоте я показал вывод.

Монтирование съёмных устройств

Монтирование съёмных устройств важный аспект управления данными, предоставляющий возможность взаимодействия с внешними носителями информации, такими как USB-накопители, внешние жесткие диски и флэш-карты.

Для монтирования USB-флешки необходимо пройти несколько шагов.

Подключаем флешку к компьютеру. Затем определяем устройство с помощью утилиты fdisk. В моём случае это «/dev/sda1». Создаём точку монтирования. Это директория, в которой будет доступно содержимое флешки. Используем команду mkdir, например:
$ sudo mkdir /mnt/usb

Теперь примонтируем флешку командой:
$ sudo mount /dev/sda1 /mnt/usb

Вы можете проверить, что флешка была успешно смонтирована, используя команду df -h или просто перейдя в директорию монтирования и просмотрев содержимое.

Теперь вы можете обращаться к файлам на USB-флешке, переходя в директорию /mnt/usb (или ту, которую вы выбрали).
Монтирование образов дисков

Монтирование образов дисков – это важная задача в сценариях, где требуется виртуальный доступ к содержимому дисковых образов. Рассмотрим пример монтирования ISO-образа диска Debian. Также сначала я создал точку монтирования «disk_image» командой:
$ sudo mkdir /mnt/disk_image

Затем указал команду с опцией -o и параметром loop.

    Параметр loop для команды mount в Linux используется для монтирования образов файловых систем, таких как ISO или IMG файлы, как если бы они были физическими устройствами. Когда вы используете параметр loop, ядро Linux создаёт «петлю» (loop device), которая позволяет файлу образа быть доступным как блочное устройство.

$ sudo mount -o loop ~/Загрузки/debian-12.4.0-amd64-netinst.iso /mnt/disk_image/
Диск был смонтирован в режиме только для чтения (RO — reed only). О чем нас оповестило сообщение: 

    mount: /mnt/disk_image: WARNING: source write-protected, mounted read-only.

Затем, используя команду cd, можно перейти в каталог с диском. А для просмотра содержимого используем команду ls.

Автоматическое монтирование дисков в linux

Для настройки автоматического монтирования дисков при старте компьютера в системах на базе Linux, необходимо добавить соответствующие записи в файл /etc/fstab. Файл /etc/fstab содержит информацию о различных файловых системах и их точках монтирования.

    Файл /etc/fstab в Linux представляет собой таблицу монтирования файловых систем. Его основное предназначение — определение параметров монтирования устройств и файловых систем при каждом запуске операционной системы. Подробнее читайте здесь.

Сначала вам нужно определить идентификатор устройства или его UUID. Сделать это можно командой lsblk -f или blkid. Я, для примера, буду использовать команду:
$ lsblk -f

В моем случае UUID нужного мне диска такой — d6270154-1ee1-425b-96aa-5c7cdd032bb3.

Смотрим UUID устройства с помощью команды lsblk -f

Теперь создам точку монтирования  в папке «/mnt» с именем «save» командой:
$ sudo mkdir /mnt/save

Далее открываем файл «fstab» для редактирования:
$ sudo nano /etc/fstab

Добавляем в конец файла строку в таком форматом:
UUID=ваш-uuid /mnt/ваша_точка_монтирования ext4 defaults 0 2

Замените ваш-uuid на UUID вашего устройства, /mnt/ваша_точка_монтирования на точку монтирования, ext4 на тип файловой системы вашего устройства (например, ntfs, vfat, ext3 и т.д.), и defaults на необходимые опции монтирования.

Примените изменения. Чтобы проверить, что запись корректна и не вызовет проблем при следующей загрузке, вы можете смонтировать устройство без перезагрузки командой:
$ sudo mount -a

Эта команда попытается смонтировать все файловые системы, указанные в /etc/fstab. Если вы, что-то сделали не так будет отображена ошибка и её можно будет исправить. Если будет выведено сообщение:
mount: (hint) your fstab has been modified, but systemd still uses
       the old version; use 'systemctl daemon-reload' to reload.

Это обозначает, что — «fstab был изменен, но система по-прежнему использует старую версию».

Выполните команду:
$ sudo systemctl daemon-reload

Эта команда перезагрузит конфигурацию systemd, включая изменения, сделанные в /etc/fstab. А затем снова выполните mount -a.

Перезагрузите компьютер, чтобы убедиться, что диск монтируется автоматически. Для этого можно использовать команду:
$ sudo reboot

Размонтирование устройств в linux

Размонтирование устройств в Linux осуществляется с помощью команды umount. Эта команда отсоединяет файловую систему, связанную с устройством, от дерева каталогов. Это позволяет безопасно извлечь устройство или прекратить его использование.

Прежде чем размонтировать устройство, убедитесь, что никакие программы или процессы не используют файлы на устройстве. Вы можете использовать команду lsof или fuser для проверки:
sudo lsof /mnt/ваша_точка_монтирования
sudo fuser -m /mnt/ваша_точка_монтирования

Если диск ничем не занят то вы не увидите вывод сообщения о процессах. В том случае если устройство занято то будет сообщение с номерами. Пример:
/mnt/save: 1234 5678

В этом примере 1234 и 5678 — это идентификаторы процессов (PID), использующих ресурсы в указанной директории.

После того как убедились, что можно совершить операцию размонтирования используйте команду umount, указав точку монтирования или устройство:
$ sudo umount /mnt/ваша_точка_монтирования

или
$ sudo umount /dev/sdXN

Замените /mnt/ваша_точка_монтирования на точку монтирования устройства и /dev/sdXN на имя устройства (например, /dev/sdb1).

Вы можете проверить, что устройство больше не монтируется, с помощью команды df -h или lsblk.

Если устройство занято и не может быть размонтировано, команда umount выдаст сообщение об ошибке.

В этом случае вам нужно закрыть все программы, которые используют устройство, или принудительно размонтировать его с помощью опции -l (lazy unmount), которая отсоединит устройство после того, как оно перестанет быть занятым:
$ sudo umount -l /mnt/ваша_точка_монтирования

Однако следует быть осторожным с принудительным размонтированием, так как это может привести к потере данных, если на устройстве в данный момент происходит запись.

Взято с:

https://chuzhoy007.ru/komanda-mount-montirovanie-diska-v-linux



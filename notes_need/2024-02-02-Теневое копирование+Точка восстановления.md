Теневое копирование+Точка восстановления

### Теневое копирование/Точка восстановления

#### TimeShift

TimeShift - программа, делающая снимок системы на определенный момент времени. Она создает снимки либо посредством rsync, либо посредством снимков btrfs.

При первом запуске программа оценит размер системы и свободное место диска, предложит выбрать диск для создания снимка и создать расписание.

Чтобы создать снимок в окне программы нажмите на кнопку "Создать".

Для создания из консоли:

- $su- 

- #timeshift --create

Или

- #timeshift --create --comments "Установка SambaDC"

#### Для восстановления - "Восстановить".

В случае с rsync программа создает снимок в каталоге /timeshift, а в случае btrfs делает снимок средством этой файловой системы.

Т.к. снимки хранятся в каталоге, то они будут копироваться на сервер Bacula (если вы его настроите) и, в конечном итоге, восстановлены.

Установка:

- $su-

- #apt-get install timeshift

#### Воостановление из консоли

Если у вас после ваших действий или после обновления системы не загружается GUI, вы можете восстановить систему из текстового интерфейса.
Поломанная система с текстовым интерфейсом

 1. Запустите программу от суперпользователя

- $su -

- #timeshift

 2. Посмотрите список точек восстановления:

- #timeshift --list

1. 2020-01-26_12-42-07

2. 2020-01-23_09-24-37

3.Восстановите необходимую точку:

- #- timeshift --restore 2

Rescue-диск

1. С помощью fdisk -l

#### Просмотрите список дисков/разделов

\# fdisk -l

Определите ваш системный диск (ext4). Если у вас несколько систем, то можете попробовать выполнить, например:

- mount /dev/sda3 /mnt

Перейдите в корень системы

- chroot /mnt

2. Запустите программу от суперпользователя

- $su-

- #timeshift

3. Посмотрите список точек восстановления:

- #timeshift --list

2020-01-26_12-42-07

4. Восстановите необходимую точку на необходимый раздел:

- #timeshift --restore --snapshot '2020-01-26_12-42-07' --target /dev/sda3

Взято:

[Теневое копирование+Точка восстановления](https://www.altlinux.org/%D0%A2%D0%B5%D0%BD%D0%B5%D0%B2%D0%BE%D0%B5_%D0%BA%D0%BE%D0%BF%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%2B%D0%A2%D0%BE%D1%87%D0%BA%D0%B0_%D0%B2%D0%BE%D1%81%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F)

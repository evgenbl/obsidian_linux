#+STARTUP: content

* emacs
** emacs в консоле
konsole -e 'emacs -nw'
** основные команды
C = Ctrl
M = Alt
C-x C-f - открыть файл
C-p     - вверх на одну строку
C-n     - вниз на одну строку
C-f     - вперед на один символ
C-b     - назад на один символ
C-a     - в начало строки
C-e     - в конец строки
С-s       - поиск по файлу
С-v       - на экран вперед
M-v       - на экран назад
C-x C-s - сохранить файл
C-x C-w - сохранить буфер в файле с новым именем
M-x       - начать вводить команду, например, query-replace-regexp
M-x speedbar - файловый менеджер
TAB      - активно используется для дополнения названия файлов или команд
С-x 0     - удалить текущее окно
C-x 1     - удалить все окна, кроме текущего
C-x 2     - разделить окно по горизонтали
C-x 3     - разделить окно по вертикали
S-F3      - включить внутренний счетчик, помогает вести длинную нумерацию
C-RET   - в режиме CUA поставить метку для начала выделения прямоугольника
Esc Esc Esc - выход из любого тупика в емакс
C-z     - свернуть окно
C-x C-c - выход из emacs
** Emacs: основные сочетания клавиш 
Обозначения:

    C — клавиша Control, обычно настроена на Ctrl.
    M — клавиша Meta, обычно настроена на Alt.

Emacs: Общее

    M-x ввести команду
    C-x C-c закрыть Emacs
    C-g прекратить текущую операцию
    C-h b показать список горячих клавиш

Редактирование, работа с файлами

    C-x C-s сохранить

    C-x C-f открыть файл / создать новый

    C-x C-w сохранить как

    M-w копировать

    C-w вырезать

    C-y вставить

    C-k вырезать до конца строки

    C-x u отменить

Поиск и замена

    C-s <набор слова> поиск далее по файлу (нажать повторно C-s, чтобы перейти к следующему вхождению)

    C-r <набор слова> поиск назад по файлу

    M-x replace-string RET <from> RET <to> заменить все вхождения текста <from> на <to>

    M-% запрос замены слова по одному

Работа с окнами и буферами

    C-x 0 закрыть текущее окно

    C-x 2 разделить окно по вертикали

    C-x 3 разделить окно по горизонтали

    C-x o переключение между окнами

    C-x -> / C-x <- переключение между активными буферами в текущем окне

Emacs SML-mode

    C-c C-s запустить REPL SML

    C-c C-l компилировать и загрузить текущий файл (должен быть сохранён)

    C-c C-b компилировать и загрузить текущий буфер

    Tab выровнять текущую строку (исправить форматирование)

    C-M-\ исправить форматирование в выделенной области

    M-; вставить/выровнять комментарий
** Работа с окнами и буферами.
C-x 0 закрыть текущее окно
C-x 2 разделить окно по вертикали
C-x 3 разделить окно по горизонтали
C-x o переключение между окнами
C-x -> / C-x <- переключение между активными буферами в текущем окне
C-x C-f find-file 	Открыть файл на диске
C-x C-s save-buffer 	Сохранить буфер на диске
C-x C-w write-file 	Сохранить буфер в файле с новым именем
C-x C-b list-buffers 	Отобразить список открытых буферов в новом окне
C-x b 	switch-to-buffer 	Переключиться в другой буфер в текущем окне
C-x C-c save-buffers-kill-emacs 	Перед выходом из редактора запросить о необходимости сохранения изменённых файлов
C-x i 	insert-file 	Вставить содержимое файла в буфер в текущую позицию
C-x 0 	delete-window 	Закрыть текущее окно (при этом буфер не удаляется)
C-x 1 	delete-other-windows 	Закрыть все окна кроме текущего
C-x 2 	split-window-vertically 	Разделить окно по горизонтали
C-x o 	other-window 	Переход в другое окно
** Быстрая навигация между открытыми буферами
;; Buffer Selection and ibuffer settings
(require 'bs)
(require 'ibuffer)
(defalias 'list-buffers 'ibuffer) ;; отдельный список буферов при нажатии C-x C-b
(global-set-key (kbd "<f2>") 'bs-show) ;; запуск buffer selection кнопкой F2
** dired-mode
;; Dired
(require 'dired)
(setq dired-recursive-deletes 'top) ;; чтобы можно было непустые директории удалять...

Теперь можно запустить dired-mode комбинацией клавиш C-x d. Для удаления папки в dired-mode наведите курсор на эту папку, нажмите d, затем x. Чтобы убрать с папки отметку на удаление нажмите u.
